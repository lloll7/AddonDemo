[supervisord] ; supervisord主配置段
nodaemon=true ; 以非守护进程方式运行，便于容器前台管理
logfile=/var/log/supervisord.log ; supervisord主日志文件路径
logfile_maxbytes=50MB ; 日志文件最大50MB
logfile_backups=10 ; 日志文件最多保留10个备份
loglevel=info ; 日志级别为info
pidfile=/var/run/supervisord.pid ; supervisord进程pid文件路径

[program:backend] ; 后端服务配置
command=node /app/dist/app.js ; 启动后端服务的命令
directory=/app ; 设置工作目录为/app
autorestart=true ; 程序异常退出时自动重启
startretries=10 ; 启动失败重试10次
startsecs=10 ; 启动后10秒无异常才认为启动成功
stderr_logfile=/var/log/backend.err.log ; 标准错误日志文件路径
stdout_logfile=/var/log/backend.out.log ; 标准输出日志文件路径
stderr_logfile_maxbytes=10MB ; 错误日志最大10MB
stdout_logfile_maxbytes=10MB ; 输出日志最大10MB
stderr_logfile_backups=10 ; 错误日志最多保留10个备份
stdout_logfile_backups=10 ; 输出日志最多保留10个备份

[program:nginx] ; nginx服务配置
command=nginx -g "daemon off;" ; 以非守护进程方式启动nginx
autorestart=true ; 程序异常退出时自动重启
startretries=3 ; 启动失败重试3次
stderr_logfile=/var/log/nginx.err.log ; nginx错误日志文件路径
stdout_logfile=/var/log/nginx.out.log ; nginx输出日志文件路径